# Imports

from urllib import urlopen
from datetime import datetime as DT
import xml.etree.ElementTree as ET

# Constants

web_site = "http://api.wmata.com/Bus.svc/RouteSchedule?routeId=%s&date=2013-07-05&includingVariations=true&api_key=z3k93zgdm7t5cyaf7n4b72b7"
bus_list = ['11Y', '13F', '13G', '16X', '16Y', '31', '32', '34', '36', '37', \
            '38B', '39', '3Y', '42', '43', '52', '53', '54', '5A', '63', \
            '64', '70', '74 NOR', '74 SOU', '79', '7Y', '80', '96', 'A11', \
            'A42', 'A46', 'A48', 'A9', 'D1', 'D3', 'D4', 'D5', 'D6', 'D8', \
            'G8', 'H1', 'L1', 'L2', 'N2', 'N3', 'N4', 'N6', 'P17', 'P19', \
            'P6', 'S1', 'S2', 'S4', 'S9', 'V5', 'V7', 'V8', 'V9', 'W13', 'X1', \
            'X2', 'X9']

stop_list = ['1000910', '17074', '1003432', '1003287', '1001061', '1001068', '1001018', '1000991', '1001097', '17455', '1001264', '1000521', '1001329', '1001366', '1001427', '1000679', '11814', '1003571', '1000901', '1001054', '1001085', '1001073', '1001106', '1001110', '1001175', '18198', '1000885', '11900', '1000878', '1001169', '1000712', '1003161', '1000757', '1000753', '1001209', '1002686', '1001093', '1000992', '12235', '1002973', '1001037', '1000710', '1001199', '1003733', '1002867', '1002943', '1002942', '1002863', '1002917', '1002906', '1002862', '1002436', '1002905', '1002918', '1002879', '1002875', '1001777', '1002496', '1002907', '1003415', '1002514', '1002874', '7186', '1002899', '1002923', '1002944', '1002941', '1001922', '1002873', '1002945', '1002940', '1002910', '1002872', '1001989', '1002939', '1002946', '1002882', '1002938', '1002947', '1002919', '1002911', '1002871', '1002048', '1002948', '1002881', '11818', '1002903', '1002920', '1002900', '1002901', '1002922', '1002904', '1002937', '1002869', '1002162', '1002921', '1002902', '1002183', '1002868', '1002880', '1001428', '1002077', '1002870', '1003414', '1002950', '1002949', '1002936', '1001511', '1002913', '1002878', '1003132', '1001607', '1002305', '1002302', '1002898', '1002924', '1002241', '1002897', '1001666', '1002877', '1002925', '1002865', '1002340', '1002876', '1002914', '1002896', '1002864', '1002927', '1002894', '1002916', '1002895', '1002926', '1001193', '18071', '1001123', '1001201', '1001192', '1001040', '1001069', '1001174', '1001210', '1001334', '1001402', '1001091', '1000911', '1000942', '1000979', '1000975', '1001056', '1001080', '1001112', '1001171', '1000934', '1000845', '1001392', '6000162', '1001302', '1001347', '1001483', '1001403', '1001423', '1001517', '1001386', '1001296', '1002157', '1002192', '1002224', '1002237', '1002293', '1002161', '1001083', '15664', '1003181', '18145', '1001082', '1003183', '1001168', '1001292', '1001025', '1001875', '4000417', '4000418', '6000035', '1001576', '1001624', '1003200', '1001575', '1001614', '1001638', '1001531', '1001719', '1001729', '1001693', '1001664', '1000409', '1000369', '1003407', '1001821', '1001839', '1000025', '1000525', '17500', '1001581', '1001620', '1000530', '1000520', '18265', '1000567', '1000614', '1000588', '1001842', '1000038', '1000137', '1000486', '1000474', '1000133', '1001770', '1001793', '1001161', '1001204', '1001752', '1001644', '1001649', '1001712', '1003278', '1001730', '1001741', '1000833', '1000622', '1000595', '1000561', '1000716', '1000746', '1000834', '1003296', '1003303', '1001130', '1001149', '1001188', '1001205', '1001208', '1001281', '1001275', '14754', '1000116', '1000111', '1000041', '1000029', '1000023', '1000529', '17666', '17680', '1000104', '1000106', '1000126', '1000127', '1000014', '1001166', '18257', '1003674', '1000837', '1000880', '1000995', '1001019', '4662', '1000644', '1000596', '1001086', '1000583', '1003417', '1001132', '1003418', '1000566', '4957', '1000750', '1003347', '1000694', '1001195', '1000930', '1000928', '17446', '1001926', '18104', '18103', '17447', '17449', '1002104', '17448', '1000846', '1000078', '1000528', '1000071', '1000068', '1000057', '1000060', '1003354', '18246', '1000886', '17623', '1001646', '1001669', '17624', '17625', '1001466', '4000258', '4000190', '4000970', '4000193', '4000255', '18127', '3000981', '3000998', '3000955', '3001010', '3001017', '3001018', '3001032', '3002947', '1000336', '1000332', '1000342', '1000340', '1000350', '1000347', '1000366', '1000358', '1000387', '1003271', '1000377', '1003270', '1000394', '1000399', '1000405', '1000145', '1000147', '1000356', '1000353', '1000328', '1000548', '1000143', '17412', '1000598', '1000594', '1000574', '1002933', '1002932', '1002891', '1002893', '1002928', '1002892', '1002929', '1002930', '1002931', '1002890', '1002889', '1002888', '1002934', '3000186', '3000140', '3000137', '3000169', '3000170', '3002805', '3000167', '3000197', '3000161', '3000160', '3000141', '3000142', '3000196', '3000147', '3002577', '3000139', '3000138', '3004030', '3003998', '3000156', '3000157', '17509', '17510', '3000184', '3002806', '3002807', '1000740', '1003273', '1003348', '1003350', '1003071', '3001431', '3001455', '6000522', '6000529', '1000051', '1003684', '1000046', '1000048', '1003352', '1003353', '5001927', '6000926', '3001247', '3001258', '3001242', '3001234', '1000065', '1000061', '1000049', '1000052', '1003098', '4000421', '4000393', '4000389', '4000374', '4000424', '1001013', '1001034', '5639', '1001118', '1001113', '1001098', '1001095', '1001088', '1001089', '1001077', '1001081', '1001072', '1001064', '1001024', '1001023', '1001032', '5625', '1001059', '5643', '5663', '1003199', '1001775', '1001772', '1001769', '1001773', '3000295', '3000296', '3000325', '3000324', '3000273', '3000272', '3000216', '3000215', '3000258', '3004089', '3000228', '3000227', '3000253', '3000252', '3000334', '3000333', '3002803', '3002802', '3000289', '3000314', '3000318', '3000241', '3000240', '3000287', '3000309', '3000310', '4106', '1001783', '1001788', '1001658', '1001704', '1001731', '1001749', '3001276', '3001265', '3001271', '1003182', '1003219', '1003218', '6000033', '6000029', '6000030', '6000020', '6000019', '1002273', '1002291', '1000690', '1000692', '1000925', '1000923', '1000922', '1000909', '1000900', '1000908', '1000907', '1000898', '1000897', '1000939', '1000926', '1000927', '1000924', '1000906', '1000917', '1000918', '1000915', '1000913', '1000919', '1001832', '1001829', '1001843', '1001815', '1001816', '1001827', '3002719', '1002041', '1002045', '1002015', '1002025', '1002052', '1002055', '3000936', '3000948', '3000939', '3000942', '3000945', '18151', '1002754', '6000639', '6000661', '6000658', '6000828', '6000624', '6000604', '6000688', '6000685', '6000677', '6000666', '6000651', '3000081', '3000080', '3000078', '3000083', '2001002', '2001008', '2001001', '2001009', '6000249', '5002152', '5002223', '5001026', '5002153', '6000305', '6000304', '6000250', '6000169', '6000258', '6000259', '6000166', '17648', '17511', '6000194', '6000203', '6000232', '6000234', '6000151', '6000149', '6000141', '6000219', '6000223', '6000291', '6000288', '6000242', '6000245', '5002230', '1001975', '1001969', '1001964', '1001951', '1001809', '1001724', '1001744', '1001810', '1001694', '1001686', '1001985', '1001789', '1001779', '1001901', '1001878', '1001862', '1003225', '1001981', '1001991', '1000990', '1000074', '1000075', '1000053', '1000054', '1000079', '1003000', '1000058', '1000063', '1001877', '1002477', '1002490', '1001734', '1001697', '1002221', '1002509', '1002502', '1001681', '1001858', '1001826', '1001979', '1001976', '1002517', '1002528', '1002535', '1002539', '1002079', '1002080', '1001399', '1002565', '1002569', '1002635', '1002639', '1002657', '1002659', '1001717', '1001722', '1002694', '1001626', '1002708', '1002702', '1002152', '1002168', '1002743', '1002721', '1002685', '1002672', '1002597', '1002601', '1002210', '1002235', '1002240', '1002271', '1002296', '1002285', '1002331', '1002312', '1002372', '1002369', '1002416', '1002415', '1001890', '1001913', '1002466', '1002468', '1002051', '1002038', '1001352', '1001618', '1001295', '18194', '1001343', '1001326', '1001375', '1001574', '1001592', '1000854', '1000859', '1000871', '1000860', '1000870', '1000858', '1000852', '1000865', '1000849', '1000863', '1003264', '1000866', '1000853', '1000861', '1003262', '1003263', '1000857', '1000875', '1000851', '1000869', '1000855', '1000868', '14748', '1000850', '1000867', '1003265', '1000864', '1000874', '3001487', '1000667', '18286', '1003665', '1003599', '1003424', '1003425', '1000961', '1000963', '1000962', '1000965', '1000966', '1000964', '1000967', '1000960', '1000659', '1000665', '1002957', '1003411', '1000484', '1000479', '3001340', '1000947', '1000945', '17536', '5002017', '1003156', '18100', '4632', '1000626', '1000630', '1001012', '1001004', '1001005', '1003203', '1003197', '1003381', '1001000', '1001007', '1001001', '1001010', '1001002', '1001003', '1001011', '1000997', '1001014', '1001009', '1001008', '1000999', '17584', '2001007', '2001003', '1002886', '2001004', '1002885', '1002935', '1002883', '1002287', '1002887', '2001006', '2001005', '1002884', '1001525', '1002410', '1002434', '1002343', '1002342', '1002435', '1003410', '3001423', '3001461', '1002300', '1002391', '1002370', '1003009', '1001864', '1001863', '1001885', '18233', '1001837', '1001881', '1001882', '18254', '18255', '18253', '1001628', '1001603', '1001564', '3001315', '1003157', '17575', '1000829', '1003154', '1001197', '1001586', '3000189', '3000188', '3000172', '3000192', '3000171', '3000158', '3000155', '3000166', '3000162', '3000195', '3000153', '3000165', '3000164', '3000198', '3000220', '3000217', '3000205', '3000206', '3000159', '3000154', '3002810', '3000163', '3000152', '5001880', '5001853', '5001879', '5001854', '5001855', '3002813', '3002814', '3000126', '3000123', '3000110', '3000115', '3000116', '3000120', '3000119', '3000109', '3000101', '3000102', '3002812', '3002811', '3000105', '3000106', '3000092', '3000091', '6000915', '6000175', '1001523', '1001529', '1001372', '1001405', '1001903', '1001904', '1003210', '1001923', '1001907', '1001931', '2000027', '3002641', '3002642', '3000095', '3000096', '5001869', '5001864', '5001866', '5001867', '5001862', '5001871', '5001846', '5001847', '5001888', '5001868', '5001865', '5001887', '5001870', '5001863', '5002225', '5001031', '5002226', '5001047', '5002224', '5001017', '1000420', '1003683', '1000417', '1000416', '17578', '1000410', '1000408', '1000396', '1000397', '1000364', '1000361', '1000343', '1000335', '1000374', '1000376', '1000425', '1000388', '1000383', '1000426', '3001254', '3001263', '3001256', '3001255', '1001147', '1001140', '1001133', '1001136', '1001138', '1001137', '1000540', '1001143', '1001116', '1001141', '17468', '1001155', '18270', '17485', '17481', '1001156', '1001108', '18162', '18144', '1001124', '1003467', '1001131', '1001111', '1001104', '1001117', '1001121', '1001105', '1001103', '17454', '1001150', '1001152', '1001135', '1000539', '1000537', '1000538', '1000472', '1000564', '1000542', '17533', '1001945', '3001293', '3002945', '3001290', '3002944', '3001295', '17535', '5001925', '1000554', '1000550', '1001184', '1003661', '1003662', '1001191', '1001185', '1001183', '1001181', '1000555', '1000549', '1000551', '1000557', '1000556', '1000552', '1001187', '1001176', '1001179', '1000558', '1002037', '1002072', '1000739', '1000721', '1000742', '1002966', '1003619', '1000729', '1000730', '1000732', '1000723', '1000738', '1000724', '1000736', '1000735', '1320', '3002779', '3000372', '3000369', '3000423', '3000460', '3000459', '3000411', '3000424', '1001997', '1001994', '1002002', '1002019', '1002034', '1002003', '1002027', '3000075', '3000079', '3000072', '3000082', '3000071', '3000073', '3000077', '3000076', '6024', '1000533', '1003202', '1001224', '1001227', '1001234', '1001230', '1001223', '1001237', '1001232', '1001228', '1001240', '1001238', '1001225', '1003509', '1001231', '1001220', '1001239', '1001222', '1001244', '1001221', '1003703', '1001242', '1001226', '1001229', '1001236', '1001214', '1001233', '1001219', '1001243', '1001213', '1001216', '1001247', '1001246', '1003652', '1001241', '1001217', '1001235', '1001274', '1001429', '1001528', '1001313', '1001304', '1003325', '1001359', '1001348', '1001422', '1001526', '1003326', '5001005', '5000998', '3001231', '3001316', '3001367', '3002942', '3001266', '3001358', '3001280', '3001353', '3001289', '3002943', '3000883', '3000916', '3000933', '3002949', '3000920', '3000904', '3000902', '3000871', '5001038', '1001542', '3000128', '3000127', '3000341', '3000340', '1000030', '1002212', '1002215', '1002209', '1000895', '1000883', '1000957', '1000969', '1000192', '1000285', '1000128', '1000096', '1000099', '1000138', '1000149', '1000148', '1003014', '1000091', '1000124', '1000117', '1000354', '1000184', '1000161', '1000171', '1000207', '1003339', '1000271', '1000334', '1000253', '1000255', '1000245', '1000240', '1000211', '1000210', '1000315', '1000113', '1000320', '1000373', '1000105', '1000107', '1000139', '1000382', '1000355', '1000378', '1000423', '1000389', '1000398', '3001051', '3001068', '3001111', '3001122', '3001101', '3001084', '3001195', '3002946', '3001159', '3001144', '3001210', '3001235', '3001262', '1003285', '18081', '1000513', '1000504', '1000507', '1000498', '1000495', '1000517', '1000497', '1001322', '1001323', '1003205', '1001315', '1001338', '1001340', '1001318', '1001321', '1001319', '1003204', '1000515', '1000512', '1000511', '1000496', '1000502', '18092', '1000514', '1003032', '1000516', '18263', '1000509', '18264', '1000505', '1003148', '18262', '1000503', '1003001', '1000510', '17662', '17665', '2001125', '2001019', '2001124', '1003209', '1001390', '1001572', '1001573', '1001971', '1001957', '1001753', '1002039', '1002059', '1001802', '1001812', '1001853', '1001844', '1001889', '1001886', '1001933', '1001941', '1001477', '1001474', '1002967', '1003206', '7514', '1002007', '1003207', '1002200', '1002092', '1002086', '1002131', '1002138', '1002184', '1003208', '1001409', '1001408', '1001648', '1001616', '1001615', '1001671', '1001654', '1001692', '1001707', '1001710', '1001740', '1002177', '3000066', '3000070', '3000065', '3000067', '3000064', '1000524', '1000531', '12610', '3002950', '3000889', '3000885', '3000878', '3000876', '1003198', '1000954', '1001613', '1002203', '1001478', '1001473', '1001518', '1001726', '1001728', '1001876', '1001872', '1002310', '1002323', '1002341', '1002407', '1002432', '1002473', '17678', '17679', '1003521', '1002480', '1002485', '1001676', '1001660', '2000011', '2000015', '2000014', '1001629', '17585', '2000019', '2000018', '1001887', '1001033', '1002411', '2000009', '1001932', '1001938', '1001970', '1001962', '1002087', '1002094', '2000012', '1002165', '1002153', '2000025', '1001796', '2000030', '2000029', '1002211', '2000022', '1001594', '1001596', '2000039', '1001559', '1002339', '1002388', '1002387', '1002258', '1002283', '1002275', '1002229', '1002001', '1002012', '1002443', '1000980', '1000940', '17563', '1001520', '1001784', '18241', '6000557', '1001935', '1002089', '1001958', '1001965', '1002105', '1002049', '1002050', '1003159', '1001950', '1001942', '1001934', '1001949', '1003158', '1000681', '1000487', '1000494', '1000526', '1000649', '1000718', '1002963', '1000832', '1000717', '1000698', '1000609', '1000761', '1000645', '1000597', '1000570', '1000575', '1000523', '1000506', '1000488', '1000489', '1000490', '1000483', '1000480', '1001410', '1001411', '1000532', '1000541', '1000763', '1000835', '1000953', '1000988', '1000987', '1000943', '1000844', '1000882', '1000903', '1000894', '1001096', '1003295', '17650', '1001160', '1001189', '13758', '1001071', '1001053', '1003215', '1003214', '1000086', '1000088', '1000095', '1000094', '1000055', '1000056', '1000069', '1000073', '1000083', '1000082', '3001181', '3001178', '17689', '3000074', '1002128', '1002121', '1002134', '1002139', '1002145', '1002140', '1002149', '1002146', '1002147', '1002150', '1002112', '1002116', '1001268', '1001387', '1001468', '1001311', '1001350', '1001540', '1001501', '1001504', '1001476', '1001537', '4000404', '4000405', '6000531', '6000530', '17530', '5432', '6000544', '6000517', '6000561', '6000560', '1003180', '1003163', '1003165', '1003177', '1003174', '1003168', '6000882', '6000827', '4000028', '6000712', '1002292', '1002330', '1002334', '17573', '1002227', '1002304', '1002427', '1002373', '1002385', '1002284', '1003092', '1001298', '1002970', '1001333', '1002971', '1001357', '1002172', '1002129', '1002167', '1002205', '1002201', '1002101', '1001652', '1003679', '1001308', '1001305', '1003660', '1003525', '1001353', '1001335', '1001332', '1001206', '1001065', '1001383', '1003065', '1003062', '1001022', '1001516', '1001481', '1001120', '1001173', '1001070', '1001115', '1001165', '1000475', '3002948', '3000112', '3000111', '3000108', '3000107', '3000100', '3000099', '3002781', '3002782', '3000117', '3000130', '3000129', '3000114', '3000113', '3000133', '3004073', '3004072', '3000103', '3000104', '3002780', '3000093', '3000094', '3000131', '3000132', '3000097', '3000098', '3000125', '3000121', '3000122', '3000134', '3000124', '3002784', '3000118', '3000085', '3000086', '3000084', '3002809', '3000250', '3000246', '3002645', '3002648', '3000265', '3000236', '3000235', '3002647', '3002646', '3000339', '3000338', '3002650', '3002643', '3000222', '3000221', '3000151', '3000150', '3002808', '3000343', '3002649', '3000264', '3002644', '3001378', '3001376', '1000466', '1000467', '1000465', '1001459', '1000464', '1001447', '1001449', '17532', '1000948', '1000944', '1000958', '1000559', '1000545', '1000469', '18084', '1000447', '1000438', '18101', '1003283', '1000485', '18208', '1000981', '1000976', '1000985', '1001202', '1001265', '1001270', '1001299', '1001316', '1003227', '16814', '18102', '1003398', '1001290', '1003226', '1000593', '1003391', '1000453', '1000431', '1000711', '1003409', '1000702', '1000683', '1000662', '1000653', '1000611', '1003408', '1000576', '1002965', '15683', '15682', '6000788', '6000884', '18231', '3002941', '3001312', '1000565', '17572', '1000544', '1001490', '1001488', '1001514', '1001515', '1001487', '1001485', '1001495', '1001484', '1001482', '1001492', '1001479', '1001489', '1001493', '1001491', '1001497', '1001486', '1001432', '1001475', '1001500', '1003654', '1001549', '1003276', '1003277', '1001550', '1001546', '1001548', '1000144', '1002267', '1002264', '1001556', '1001547', '1001554', '1001552', '1001553', '1001551', '1001563', '1001562', '1001555', '1001560', '1001569', '1001778', '1001781', '7167', '1002964', '1001823', '1001736', '1001732', '1001754', '1001758', '1001797', '1001790', '1001701', '1001705', '1001715', '1001713', '1001622', '1001617', '1001600', '1001609', '1001539', '1001524', '1001642', '1001641', '1001588', '1001597', '1001662', '1001667', '1003274', '1001765', '1000745', '1000744', '1000754', '1000699', '1000706', '1000670', '1000668', '1000646', '1000641', '1000621', '1003305', '1000610', '1000586', '6000932', '6000144', '6000949', '5001892', '5001843', '5001840', '5001894', '5001841', '5001897', '5001838', '5002231', '5002024', '5002025', '5001889', '5001837', '5001844', '5001891', '5001895', '5001890', '5001845', '5001896', '5001839', '5001842', '5001893', '6000724', '6000729', '6000722', '6001253', '18166', '6000708', '6000751', '6000753', '6000705', '6000701', '6000733', '6000731', '6000698', '6000730', '6000727', '6000754', '6000726', '6000743', '6000747', '6000706', '6000707', '6000755', '6000720', '6000717', '6000823', '6000758', '6000951', '6000819', '6000757', '6000725', '6000734', '6000735', '6000749', '6000739', '6000746', '6000719', '6000715', '6000738', '6000736', '6000744', '6000745', '6000740', '6000741', '6000716', '6000718', '6000752', '6000756', '4000425', '5001030', '5001052', '5001041', '5001019', '5001936', '5001023', '6000032', '6000023', '6000028', '6000026', '6000027', '6000025', '6000021', '6000022', '6000036', '4000414', '18157', '6000362', '3827', '6000327', '6000264', '6000267', '6000880', '6000244', '6000879', '6000226', '6000190', '6000187', '6000171', '18232', '6000881', '4000007', '4000470', '4000903', '4000006', '4000026', '2001018', '2001024', '2001020', '2001012', '2001026', '2001011', '2001027', '2001123', '2001122', '2001014', '2001015', '2001023', '2001016', '2001022', '2001017', '2001021', '2001121', '2001126', '2001025', '2001013', '1001814', '1001801', '1000130', '1001543', '6001235', '6001236', '2001150', '2005434', '1000059', '1000062', '1000043', '1000042', '1000033', '1000035', '18269', '1000619', '1000020', '1000027', '1000026', '1000019', '1000084', '1000076', '1003327', '3002758', '1003329', '3000587', '3002821', '1003688', '3000545', '3000491', '3000497', '1785', '17495', '3002757', '3000510', '3000502', '17494', '3000525', '1441', '3002610', '1000371', '3000592', '1003328', '3000562', '1000064', '3000573', '3000566', '3002608', '4000360', '4000349', '4000339', '4000340', '4000362', '4000348', '1003230', '1000345', '3002819', '3002816', '3002818', '3002817', '3002820', '3002815', '1001634', '1001633', '1001630', '3000087', '3000089', '3000088', '3000090', '1002438', '1000608', '1000584', '1000592', '1000591', '1000604', '1001196', '1001317', '1001363', '1001273', '1001349', '1001397', '3000214', '3000213', '3000209', '3000212', '3000211', '1001750', '1003070', '5001883', '5001850', '5001851', '5001882', '5001881', '5001852', '5001886', '5001885', '5001849', '5001848', '5001884', '1000896', '1000983', '1000977', '1001021', '17576', '1003131', '1000920', '1000891', '5001011', '5001016', '5001007', '5001043', '1003155', '18268', '6000600', '4394', '4433', '6000590', '6000593', '6000599', '6000601', '6000595', '6000591', '6000598', '6000588', '6000583', '6000581', '6000586', '6000582', '6000579', '6000578', '6000575', '5001857', '5001876', '5001873', '5001856', '5001877', '5001858', '5001875', '5001874', '5001859', '5001860', '5001872', '5001878', '5001861', '1001623', '1003201', '1001530', '1001527', '1001567', '2000013', '1003124', '1003122', '2000003', '2000002', '2000010', '2000005', '2000006', '2000007', '13200', '2000004', '2000008', '1002605', '2000001', '1002497', '1002499', '1000146', '1003351', '1003349', '1000070', '1000072', '1000066', '1000119', '1000108', '1000109', '1000135', '1000118', '1000092', '1000093', '1000085', '1000087', '1000080', '1000081', '1000132', '6000652', '6000667', '6000643', '6000634', '6000610', '6000702', '6000697', '6000690', '6000682', '6000925', '6000671', '6000659', '17571', '1002478', '1002501', '1002529', '1002524', '1002560', '1002562', '1002585', '1002577', '1002627', '1002632', '1002646', '1002648', '1002660', '1002500', '1002465', '1003192']

start_1 = DT(2013, 7, 3, 7, 0, 0)
stop_1 = DT(2013, 7, 3, 9, 30, 0)
start_2 = DT(2013, 7, 3, 16, 0, 0)
stop_2 = DT(2013, 7, 3, 18, 30, 0)

# Functions

def bus_stops(bus):
    w_hnd = urlopen(web_site % bus)
    xml_text = w_hnd.readlines()
    root = ET.fromstring(''.join(xml_text))
    
    for direction in root:
        for trip in direction:
            for stop in trip[4]:

                temp_time = stop[3].text.split('T')[1].split(':')
                stop_time = DT(2013, 7, 3, int(temp_time[0]), \
                    int(temp_time[1]), int(temp_time[2]))

                if start_1 <= stop_time <= stop_1 or \
                start_2 <= stop_time <= stop_2:
                    stop_ids.append((bus, stop[0].text, stop[1].text, \
                                     stop_time))

    
            
# Main

if __name__ == "__main__":
    stop_ids = []  
    for i, bus in enumerate(bus_list):
        print i, bus
        try:
            bus_stops(bus)

        except:

            print "Error with bus %s. Trying again." % bus
            try:
                bus_stops(bus)

            except:
                print "Trying one more time."
                bus_stops(bus)

    final_stops = [n for n in stop_ids if n[1] in stop_list]
        
		
